{"ast":null,"code":"var _jsxFileName = \"D:\\\\Lambda\\\\WebApplicationsII\\\\AdvancedWebApplications\\\\Sprint\\\\web-sprint-challenge-advanced-web-applications\\\\client\\\\src\\\\components\\\\LoginForm.tsx\";\nimport * as React from \"react\";\nimport \"./Login.css\";\nimport { useContext, useState } from \"react\";\nimport axios from \"axios\";\nimport { BubbleContext } from \"../contexts/BubbleContext\";\n\nconst LoginForm = () => {\n  const [credentials, setCredentials] = useState({\n    username: \"\",\n    password: \"\"\n  });\n  const {\n    loading,\n    setLoading,\n    history\n  } = useContext(BubbleContext);\n\n  const submitLogin = e => {\n    e.preventDefault();\n    setLoading(true);\n    axios.post(\"http://localhost:5000/api/login\", credentials).then(res => {\n      console.log(res);\n      localStorage.setItem(\"token\", res.data.payload); //todo: push to the right page: history.push(\"/friends\");\n\n      setLoading(false);\n    }).catch(err => {\n      console.log(\"Error logging in: \", err);\n      setLoading(false);\n    });\n  };\n\n  const handleChange = e => {\n    setCredentials({ ...credentials,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  return React.createElement(\"div\", {\n    className: \"login\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, !loading ? React.createElement(\"form\", {\n    className: \"form\",\n    onSubmit: submitLogin,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    className: \"input\",\n    type: \"text\",\n    name: \"username\",\n    placeholder: \"username\",\n    onChange: handleChange,\n    value: credentials.username,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  })), React.createElement(\"label\", {\n    className: \"label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    className: \"input\",\n    type: \"password\",\n    name: \"password\",\n    placeholder: \"password\",\n    onChange: handleChange,\n    value: credentials.password,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    className: \"button\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, \"LOG IN\")) : React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, \"Loading...\"));\n};\n\nexport default LoginForm;","map":{"version":3,"sources":["D:/Lambda/WebApplicationsII/AdvancedWebApplications/Sprint/web-sprint-challenge-advanced-web-applications/client/src/components/LoginForm.tsx"],"names":["React","useContext","useState","axios","BubbleContext","LoginForm","credentials","setCredentials","username","password","loading","setLoading","history","submitLogin","e","preventDefault","post","then","res","console","log","localStorage","setItem","data","payload","catch","err","handleChange","target","name","value"],"mappings":";AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,OAAO,aAAP;AACA,SAAQC,UAAR,EAAoBC,QAApB,QAAmC,OAAnC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,aAAR,QAA4B,2BAA5B;;AAUA,MAAMC,SAA8B,GAAG,MAAM;AACzC,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCL,QAAQ,CAAC;AAC3CM,IAAAA,QAAQ,EAAE,EADiC;AAE3CC,IAAAA,QAAQ,EAAE;AAFiC,GAAD,CAA9C;AAKA,QAAM;AAACC,IAAAA,OAAD;AAAUC,IAAAA,UAAV;AAAsBC,IAAAA;AAAtB,MAAiCX,UAAU,CAACG,aAAD,CAAjD;;AAEA,QAAMS,WAAW,GAAIC,CAAD,IAAyC;AACzDA,IAAAA,CAAC,CAACC,cAAF;AACAJ,IAAAA,UAAU,CAAC,IAAD,CAAV;AAEAR,IAAAA,KAAK,CAACa,IAAN,CAAW,iCAAX,EAA8CV,WAA9C,EACKW,IADL,CACUC,GAAG,IAAI;AACTC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACAG,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BJ,GAAG,CAACK,IAAJ,CAASC,OAAvC,EAFS,CAGT;;AACAb,MAAAA,UAAU,CAAC,KAAD,CAAV;AACH,KANL,EAMOc,KANP,CAMaC,GAAG,IAAG;AACfP,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCM,GAAlC;AACAf,MAAAA,UAAU,CAAC,KAAD,CAAV;AACH,KATD;AAUH,GAdD;;AAgBA,QAAMgB,YAAY,GAAIb,CAAD,IAA4C;AAC7DP,IAAAA,cAAc,CAAC,EAAC,GAAGD,WAAJ;AAAiB,OAACQ,CAAC,CAACc,MAAF,CAASC,IAAV,GAAiBf,CAAC,CAACc,MAAF,CAASE;AAA3C,KAAD,CAAd;AACH,GAFD;;AAIA,SACI;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACK,CAACpB,OAAD,GACG;AAAM,IAAA,SAAS,EAAC,MAAhB;AAAuB,IAAA,QAAQ,EAAEG,WAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAO,IAAA,SAAS,EAAC,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AACI,IAAA,SAAS,EAAC,OADd;AAEI,IAAA,IAAI,EAAC,MAFT;AAGI,IAAA,IAAI,EAAC,UAHT;AAII,IAAA,WAAW,EAAC,UAJhB;AAKI,IAAA,QAAQ,EAAEc,YALd;AAMI,IAAA,KAAK,EAAErB,WAAW,CAACE,QANvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADJ,EAWI;AAAO,IAAA,SAAS,EAAC,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AACI,IAAA,SAAS,EAAC,OADd;AAEI,IAAA,IAAI,EAAC,UAFT;AAGI,IAAA,IAAI,EAAC,UAHT;AAII,IAAA,WAAW,EAAC,UAJhB;AAKI,IAAA,QAAQ,EAAEmB,YALd;AAMI,IAAA,KAAK,EAAErB,WAAW,CAACG,QANvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAXJ,EAqBI;AAAQ,IAAA,SAAS,EAAC,QAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cArBJ,CADH,GAwBK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAzBV,CADJ;AA6BH,CAzDD;;AA2DA,eAAeJ,SAAf","sourcesContent":["import * as React from \"react\";\r\nimport \"./Login.css\";\r\nimport {useContext, useState} from \"react\";\r\nimport axios from \"axios\";\r\nimport {BubbleContext} from \"../contexts/BubbleContext\";\r\n\r\n\r\n\r\ninterface LoginProps {\r\n    //loading: boolean;\r\n    //setLoading: (loading: boolean) =>{};\r\n    //history: any;\r\n}\r\n\r\nconst LoginForm:React.FC<LoginProps> = () => {\r\n    const [credentials, setCredentials] = useState({\r\n        username: \"\",\r\n        password: \"\"\r\n    });\r\n\r\n    const {loading, setLoading, history} = useContext(BubbleContext);\r\n\r\n    const submitLogin = (e: React.FormEvent<HTMLFormElement>) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n\r\n        axios.post(\"http://localhost:5000/api/login\", credentials)\r\n            .then(res => {\r\n                console.log(res);\r\n                localStorage.setItem(\"token\", res.data.payload);\r\n                //todo: push to the right page: history.push(\"/friends\");\r\n                setLoading(false);\r\n            }).catch(err =>{\r\n            console.log(\"Error logging in: \", err);\r\n            setLoading(false);\r\n        });\r\n    }\r\n\r\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setCredentials({...credentials, [e.target.name]: e.target.value});\r\n    }\r\n\r\n    return(\r\n        <div className=\"login\">\r\n            {!loading ?\r\n                <form className=\"form\" onSubmit={submitLogin}>\r\n                    <label className=\"label\">\r\n                        <input\r\n                            className=\"input\"\r\n                            type=\"text\"\r\n                            name=\"username\"\r\n                            placeholder=\"username\"\r\n                            onChange={handleChange}\r\n                            value={credentials.username}\r\n                        />\r\n                    </label>\r\n                    <label className=\"label\">\r\n                        <input\r\n                            className=\"input\"\r\n                            type=\"password\"\r\n                            name=\"password\"\r\n                            placeholder=\"password\"\r\n                            onChange={handleChange}\r\n                            value={credentials.password}\r\n                        />\r\n                    </label>\r\n                    <button className=\"button\">LOG IN</button>\r\n                </form>\r\n                : <h2>Loading...</h2>}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default LoginForm;"]},"metadata":{},"sourceType":"module"}